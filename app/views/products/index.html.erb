<div class="row align-items-center justify-items-center">
  <div class="col-12">
    <%= link_to "Add Product", new_product_path, class: "btn btn-primary btn-lg", data: {turbolinks: false } %>
  </div>
</div>
<div class="row">
  <% @products.each do |product| %>
    <div class="col-6 col-sm-4 col-md-3 col-lg-2 item-col">
      <div class="card card-1">
        <div class="image-box">
          <div id="carouselExampleFade<%=@products.index(product) %>" class="carousel slide carousel-fade" data-ride="carousel" data-interval="5000" data-pause="false">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleFade" data-slide-to="0" class="active"></li>
              <% product.product_picture.count.times do |i| %>
              <li data-target="#carouselExampleFade" data-slide-to=<%= i+1 %>></li>
              <% end %>
            </ol>
            <div class="carousel-inner">
              <% index = 0 %>
              <% product.product_picture.each do |p| %>
                <% if product.product_picture.index(p) == 0 %>
                  <div class= "carousel-item active" >
                    <%= image_tag p.picture.url(:small), alt: "#{product.product_name}_image", class: "product-image d-block w-100" %>
                  </div>
                <% else %>
                  <div class="carousel-item">
                    <%= image_tag p.picture.url(:small), alt: "#{product.product_name}_image", class: "product-image d-block w-100" %>
                  </div>
                <% end %>
              <% end %>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleFade<%=@products.index(product) %>" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleFade<%=@products.index(product) %>" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
        <div class="card-body">
          <h6 class="card-title"><%= product.product_name %></h6>
          <div class="row">
            <div class="col-4">
              <%= link_to "", product_path(product), class:"fa fa-eye" %>
            </div>
            <div class="col-4">
              <%= link_to "", edit_product_path(product), class:"fa fa-edit" %>
            </div>
            <div class="col-4">
              <%= link_to "", product_path(product), data: {confirm: "Are you sure to delete?"}, method: :delete, class:"fa fa-trash"%>
            </div>
          </div>
        </div>
      </div>
    </div>
  <%end%>
</div>
